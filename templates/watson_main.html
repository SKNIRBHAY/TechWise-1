{% extends 'base.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body>
{% block content %}
    <h1>Here are the upcoming seminars and workshops::</h1>

{#    <script>#}
{#    var getRawText = function(url) {#}
{#  return new Promise(function(resolve, reject) {#}
{#    var xhr = new XMLHttpRequest();#}
{#    xhr.open('get', url, true);#}
{#    xhr.responseType = 'json';#}
{#    xhr.onload = function() {#}
{#      var status = xhr.status;#}
{#      if (status == 200) {#}
{#        resolve(xhr.response);#}
{#      } else {#}
{#        reject(status);#}
{#      }#}
{#    };#}
{#    xhr.send();#}
{#  });#}
{#};#}
{##}
{#getRawText('http://gateway-a.watsonplatform.net/calls/url/URLGetText?apikey=ae62c6cb3bf5b78f03e36b38d0fcf4115ca11032&&outputMode=json&url=http://www.cnn.com/2009/CRIME/01/13/missing.pilot/index.html').then(function(data) {#}
{#    alert('Your Json result is hahah  ' );#}
{#    var url;#}
{#    url = data.text;#}
{#    getJSON(url);#}
{##}
{#});#}
{#</script>#}

<div id="result" style="color: #09238b"></div>
<script>
    var getJSON = function(url) {
  return new Promise(function(resolve, reject) {
    var xhr = new XMLHttpRequest();
    xhr.open('get', url, true);
    xhr.responseType = 'json';
    xhr.onload = function() {
      var status = xhr.status;
      if (status == 200) {
        resolve(xhr.response);
      } else {
        reject(status);
      }
    };
    xhr.send();
  });

};

 var jsonData=getJSON('https://access.alchemyapi.com/calls/data/GetNews?apikey=81eb5e006af783775d5b7850066824d767761704&return=enriched.url.title,enriched.url.url,enriched.url.enrichedTitle.docSentiment&q.enriched.url.cleanedTitle=python&q.enriched.url.enrichedTitle.taxonomy.taxonomy_.label=technology%20and%20computing&count=25&outputMode=json&start=now-12h&end=now&q.enriched.url.docSentiment.type=positive&q.enriched.url.docSentiment.score=%3E=0.5').then(function(data)
 {
    for(var i=0; i<data.result.docs.length; i++)
     {
         var url = data.result.docs[i].source.enriched.url.url;
         var mainURL = 'http://gateway-a.watsonplatform.net/calls/url/URLGetText?apikey=ae62c6cb3bf5b78f03e36b38d0fcf4115ca11032&&outputMode=json&url=' + url;
        var sjd ;
        sjd += "<br/>" + data.result.docs[i].source.enriched.url.title +  " : sentiment is " + data.result.docs[i].source.enriched.url.enrichedTitle.docSentiment.type +
                " and sentiment score is : " + data.result.docs[i].source.enriched.url.enrichedTitle.docSentiment.score + '<a href="../about.html">' + ' Read more' + '</a>'
               + '<br>';

         document.getElementById("result").innerHTML = sjd ;
     }
{#<a href="' + mainURL + '">#}
{#     for(var j=0; j<data.result.docs.length;j++){#}
{#         var sjd1;#}
{#          sjd1 +="<br/>" + data.result.docs[j].source.enriched.url.enrichedTitle.docSentiment.type + "<br>";#}
{#         document.getElementById("result").innerHTML = sjd1;#}
{#         result.innerHTML += data.result.docs.source.enriched.url.enrichedTitle.docSentiment.score;#}
{#        for(var i=0; i<data.result.docs.length; i++)#}
{# {#}
{#     result.innerText += data.result.docs[i].source.enriched.url.enrichedTitle.docSentiment.type;#}
{# }#}

 }, function(status) { //error detection....
  alert('Something went wrong.');
});
</script>
{% endblock %}
</body>
</html>
